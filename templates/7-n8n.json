{
    "icon": "https://raw.githubusercontent.com/cloudness-io/icons/refs/heads/main/n8n.svg",
    "name": "n8n",
    "readme": "n8n is a fair-code licensed workflow automation tool that lets you connect anything to everything via its open, fair-code model.",
    "tags": [
        "automation",
        "workflow"
    ],
    "services": [
        {
            "icon": "https://raw.githubusercontent.com/cloudness-io/icons/refs/heads/main/n8n.svg",
            "name": "n8n",
            "build": {
                "source": {
                    "registry": {
                        "image": "n8nio/n8n:latest"
                    }
                }
            },
            "deploy": {},
            "networking": {
                "containerPorts": [
                    5678
                ],
                "serviceDomain": {
                    "port": 5678,
                    "path": "/"
                }
            },
            "volumes": [
                {
                    "name": "n8n-data",
                    "mountPath": "/home/n8n"
                }
            ],
            "variables": [
                {
                    "key": "N8N_USER_FOLDER",
                    "value": "/home/n8n",
                    "type": "run"
                },
                {
                    "key": "N8N_HOST",
                    "value": "${{CLOUDNESS_PUBLIC_DOMAIN}}",
                    "type": "run"
                },
                {
                    "key": "N8N_PROTOCOL",
                    "value": "https",
                    "type": "run"
                },
                {
                    "key": "WEBHOOK_URL",
                    "value": "${{CLOUDNESS_PUBLIC_DOMAIN}}",
                    "type": "run"
                },
                {
                    "key": "N8N_PORT",
                    "value": "5678",
                    "type": "run"
                },
                {
                    "key": "DB_TYPE",
                    "value": "postgresdb",
                    "type": "run"
                },
                {
                    "key": "DB_POSTGRESDB_HOST",
                    "value": "${{n8n-db.CLOUDNESS_PRIVATE_DOMAIN}}",
                    "type": "run"
                },
                {
                    "key": "DB_POSTGRESDB_PORT",
                    "value": "5432",
                    "type": "run"
                },
                {
                    "key": "DB_POSTGRESDB_DATABASE",
                    "value": "${{n8n-db.POSTGRES_DB}}",
                    "type": "run"
                },
                {
                    "key": "DB_POSTGRESDB_USER",
                    "value": "${{n8n-db.POSTGRES_USER}}",
                    "type": "run"
                },
                {
                    "key": "DB_POSTGRESDB_PASSWORD",
                    "value": "${{n8n-db.POSTGRES_PASSWORD}}",
                    "type": "run"
                },
                {
                    "key": "EXECUTIONS_DATA_PRUNE",
                    "value": "true",
                    "type": "run"
                },
                {
                    "key": "EXECUTIONS_DATA_MAX_AGE",
                    "value": "168",
                    "type": "run"
                },
                {
                    "key": "N8N_METRICS",
                    "value": "false",
                    "type": "run"
                }
            ]
        },
        {
            "icon": "https://raw.githubusercontent.com/cloudness-io/icons/refs/heads/main/postgresql.svg",
            "name": "n8n-db",
            "build": {
                "source": {
                    "registry": {
                        "image": "postgres:16-alpine"
                    }
                }
            },
            "deploy": {},
            "networking": {
                "containerPorts": [
                    5432
                ]
            },
            "volumes": [
                {
                    "name": "db-data",
                    "mountPath": "/var/lib/postgresql/data"
                }
            ],
            "variables": [
                {
                    "key": "PGDATA",
                    "value": "/var/lib/postgresql/data/pgdata",
                    "type": "run"
                },
                {
                    "key": "POSTGRES_USER",
                    "value": "n8n",
                    "type": "run"
                },
                {
                    "key": "POSTGRES_DB",
                    "value": "n8n",
                    "type": "run"
                },
                {
                    "key": "POSTGRES_PASSWORD",
                    "value": "${{secret(32)}}",
                    "type": "run"
                }
            ]
        }
    ]
}