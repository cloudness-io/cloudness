// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.943
package vapplication

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	specSvc "github.com/cloudness-io/cloudness/app/services/spec"
	"github.com/cloudness-io/cloudness/app/web/views/shared"
	"github.com/cloudness-io/cloudness/helpers"
	"github.com/cloudness-io/cloudness/types"
)

func settingsDeploy(project *types.Project, application *types.Application, restrictions *types.ApplicationRestrction) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<div class=\"flex flex-col gap-2\" x-data=\"{ enableHealthcheck: form.healthcheckPath !== '' && form.healthcheckPath !== undefined }\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = shared.Input(&shared.InputProps{
			Name:    "startCommand",
			Label:   "Start Command",
			Tooltip: "Command that will be run on startup of the application container",
			Attrs: templ.Attributes{
				"x-model": "form.startCommand",
			},
		}).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "<h5 class=\"w-full\">Application Scaling</h5>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = shared.CheckBox(&shared.CheckBoxProps{
			Name:    "sleepApplication",
			Label:   "Auto Sleep",
			Tooltip: "When enabled, the application will be scaled to zero replicas when there are no inbound requests",
			Attrs: templ.Attributes{
				"x-model.boolean": "form.sleepApplication",
				"x-bind:checked":  "form.sleepApplication == 'true'",
				"@change":         "form.sleepApplication = $el.checked ? 'true' : 'false'",
			},
		}).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if specSvc.IsStateful(application.Spec) {
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "<div class=\"max-w-sm sm:max-w-md md:max-w-lg w-full\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = shared.WarningAlert("Horizontal scaling is disabled for stateful applications", `Max replica is one for
				stateful applications having volume attached or cron applications`).Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "</div>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		} else {
			templ_7745c5c3_Err = shared.Range(&shared.RangeProps{
				Name:     "maxReplicas",
				Label:    "Max Replicas",
				Legend:   "Replicas",
				Min:      "1",
				Max:      helpers.ToInt64String(restrictions.MaxInstance),
				Step:     "1",
				FormName: "form.maxReplicas",
			}).Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		templ_7745c5c3_Err = shared.Range(&shared.RangeProps{
			Name:     "cpu",
			Label:    "CPU",
			Legend:   "vCPU",
			Min:      "1",
			Max:      helpers.ToInt64String(restrictions.MaxCPU),
			Step:     "1",
			FormName: "form.cpu",
		}).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = shared.Range(&shared.RangeProps{
			Name:     "memory",
			Label:    "Memory",
			Legend:   "GB",
			Min:      "0.5",
			Max:      helpers.ToFloat64String(restrictions.MaxMemory),
			Step:     "0.5",
			FormName: "form.memory",
		}).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "<h5 class=\"w-full mt-2\">Healthcheck</h5>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = shared.Input(&shared.InputProps{
			Name:        "healthcheckPath",
			Label:       "Path",
			Placeholder: "/healthz",
			Attrs: templ.Attributes{
				"x-model": "form.healthcheckPath",
			},
		}).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = shared.Input(&shared.InputProps{
			Name:  "healthcheckTimeout",
			Label: "Timeout",
			Attrs: templ.Attributes{
				"x-model":            "form.healthcheckTimeout",
				"x-bind:placeholder": "300",
				"x-bind:disabled":    "form.healthcheckPath === '' || form.healthcheckPath === undefined",
			},
		}).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "</div>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
