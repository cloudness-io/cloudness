// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.943
package vserver

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	serverCtrl "github.com/cloudness-io/cloudness/app/controller/server"
	"github.com/cloudness-io/cloudness/app/web/views/components/icons"
	"github.com/cloudness-io/cloudness/app/web/views/shared"
	"github.com/cloudness-io/cloudness/app/web/views/xdata"
	"github.com/cloudness-io/cloudness/types"
)

func runnerSettings(server *types.Server) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<div class=\"flex items-center gap-1\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = shared.Icon(icons.RunnerIcon, "icon-xl").Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "<h3>Build/Runner Settings</h3></div><form class=\"flex flex-col place-items-baseline mt-4 gap-2\" x-data=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var2 string
		templ_7745c5c3_Var2, templ_7745c5c3_Err = templ.JoinStringErrs(xdata.ToFormData(&serverCtrl.ServerBuilderUpdateModel{
			Enabled:             server.BuildEnabled,
			IsBuildServer:       server.IsBuildServer,
			MaxConcurrentBuilds: server.MaxConcurrentBuilds,
			MaxCPUPerBuild:      server.MaxCPUPerBuild,
			MaxMemoryPerBuild:   server.MaxMemoryPerBuild,
		}))
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `app/web/views/components/vserver/runner.templ`, Line: 24, Col: 5}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var2))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "\" x-clock hx-push-url=\"false\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = shared.CheckBox(&shared.CheckBoxProps{
			Name:    "enabled",
			Label:   "Enable",
			Tooltip: "If enabled, the server will be used to build apps.",
			Attrs: templ.Attributes{
				"x-model.boolean": "form.enabled",
				"x-bind:checked":  "form.enabled=== 'true'",
				"@change":         "form.enabled= $el.checked ? 'true' : 'false'",
			},
		}).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "<div class=\"flex flex-col place-items-baseline mt-4 gap-2\" x-show=\"form.enabled === 'true'\"><!--\n\t\t\t@shared.CheckBox(&shared.CheckBoxProps{\n\t\t\t\tName:    \"is_build_server\",\n\t\t\t\tLabel:   \"Build Server\",\n\t\t\t\tTooltip: \"If enabled, the server will be used only to build apps and will not accept deployments.\",\n\t\t\t\tAttrs: templ.Attributes{\n\t\t\t\t\t\"x-model.boolean\": \"form.is_build_server\",\n\t\t\t\t\t\"x-bind:checked\":  \"form.is_build_server === 'true'\",\n\t\t\t\t\t\"@change\":         \"form.is_build_server= $el.checked ? 'true' : 'false'\",\n\t\t\t\t},\n\t\t\t\tDisclaimer: `<span x-show=\"form.is_build_server === 'true'\" class=\"text-error\">If checked, this server will be used only to run builds and applications cannot\nbe deployed here.</span>`,\n\t\t\t})\n\t\t\t-->")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = shared.Input(&shared.InputProps{
			Name:        "max_concurrent_builds",
			Label:       "Max Concurrent Builds",
			Tooltip:     "Size of the volume in GB, cannot be downsized",
			Type:        "number",
			Placeholder: "1",
			Required:    true,
			Attrs: templ.Attributes{
				"x-model.number": "form.max_concurrent_builds",
				"x-bind:min":     "1",
			},
		}).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = shared.Input(&shared.InputProps{
			Name:        "max_cpu_per_build",
			Label:       "Max CPUs Per Build",
			Tooltip:     "Maximum number of CPUs to be used per build. Remove restriction by setting to 0",
			Type:        "number",
			Placeholder: "1",
			Required:    true,
			Attrs: templ.Attributes{
				"x-bind:step":    "0.1",
				"x-model.number": "form.max_cpu_per_build",
				"x-bind:min":     "0.1",
				"x-bind:max":     "10",
			},
		}).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = shared.Input(&shared.InputProps{
			Name:        "max_memory_per_build",
			Label:       "Max Memory Per Build",
			Tooltip:     "Maximum number of Memory to be used per build. Remove restriction by setting to 0",
			Type:        "number",
			Placeholder: "1",
			Required:    true,
			Attrs: templ.Attributes{
				"x-bind:step":    "0.1",
				"x-model.number": "form.max_memory_per_build",
				"x-bind:min":     "0.1",
				"x-bind:max":     "10",
			},
		}).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "</div>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = shared.UpdateDiv("/settings/server/builder").Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "</form>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
